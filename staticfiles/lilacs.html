{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{% static 'lilacs.css'%}" rel="stylesheet">
    <title>LILACS</title>
</head>
<body>
    <div class="nav-container">
        <div class="wrapper">
            <nav>
                <div class="logo">
                <img src="{% static 'images/LOGO.png' %}" alt="LOGO">    
                </div>
                <ul class="nav-items">
                    <li>
                        <a href="#About">About Us</a>
                    </li>
                    <li>
                        <a href="#Safe_Share">Safe Share </a>
                    </li>
                    <li>
                        <a href="#Know_your_body">Know Your Body</a>
                    </li>
                    <li>
                        <a href="#Contact">Contact</a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="header-container">
            <a name="About"> <h1 class="about"> About Us</h1> </a>
            <div class="content">
                <img src="{% static 'images/About Us Bubbles.png'%}" alt="Bubbles">
               <p>
                A helpline for you to understand your body a little more and connecting with women all around the world.
                This website is designed for the women all around the world focusing on the menstrual cycle and becoming aware of our body. 
                You might not be the only one facing the issue, ask questions and understand yourself better while helping others with the similar problem. 
               <br>
                WE WOMEN ARE STRONGER TOGETHER. 
                <br>
                Let’s Learn, Understand and Help! 
               </p>
            </div>
            <div class="image_left">
                <img src="{% static 'images/logo-removebg-preview 1.png' %}" alt="LOGO">
            </div>
        </div>
        <div class="safe_share">
            <a name="Safe_Share"> <h1 class="safe"> Safe Share</h1> </a>
            <div class="content1">
                <div>
                <div id="qna-list">
                    
                </div>
                </div>
                <!-- <div>
                    <form method="POST" action="/qna/" id="qna_form">
                    {% csrf_token %}
                    <label name="Queries"> Post your queries</label>
                    <br>
                    <input name="question" type="content" required='required'> 
                    <br>
                    <button type="submit" class="submit"> Submit</button>
                    </form>
                </div> -->

            </div>
        </div>
        <div class="Know_your_body">
           
           <a name="Know_your_body"> <h1 class="Know"> Know Your Body </h1> </a> 
            <div class="content_KNB">
                <img src="{% static 'images/Safe share bubbles KNB.png' %}">
                <p class="KNB">
                    1. According to a national health survey, nearly 13% of women over the age of 18 are in fair or poor health.
                     While this number seems low, it could be even lower if all women met recommended guidelines for diet and exercise.
                     <br>
                    2.It is totally normal for your periods not to come like clockwork. 
                    More often than not, your period won’t come every 28 days of the dot. Cycles ranging from 21 to 35 days long are all considered ‘regular’.
                    <br>
                    3.Lack of menstrual hygiene can increase a woman’s chances of contracting cervical cancer, 
                    Reproductive Tract Infections, Hepatitis B infection, various types of yeast infections and Urinary Tract Infection, to name a few.
                    <br>
                    4. Check your blood pressure every 2 years if it's normal (lower than 120/80).
                     If it's high, or you're at risk for high blood pressure, you'll need more frequent checks and diabetes screening tests.
                    <br>
                    5.Intense exercise or certain medical conditions can lead to irregular periods. Irregular periods can also occur in people who are:<br>
                    a.	Obese <br>
                    b.	Breastfeeding <br>
                    c.	Perimenopausal <br>
                    d.	stressed <br>
                    <br>
                    6.Don't use soaps or vagina hygiene products-
                    While using vaginal hygiene products everyday is a good idea, using these products during menses can turn things around. Vaginas have their own cleaning mechanism which comes into play during menstrual cycles, and these artificial hygiene products can hamper the natural process leading to infections and growth of bacteria.
                    <br>
                    7. Some free apps that allow you to record your period information on the go. Consider checking out: <br>
                    i.	Glow <br>
                    ii.	Eve <br>
                    iii.Fertility Friend <br>
                    The more you log, the more these apps can tell you about predicted menstruation dates, your fertile window, and more. <br> 
                    <br> <em> When to see a doctor or other healthcare provider
                    Although occasional changes are often tied to stress and other lifestyle factors, consistent irregularity may be a sign of an underlying health condition.</em>
                    
                </p>
                <div class="image1">
                    <img src="{% static 'images/side bubbles safe share LHS.png' %}">
                </div>
            </div>
        </div>
        <div class="Contact">
            <a name="Contact"> <h1 class="Contact1"> Contact </h1> </a>
            <img src="{% static 'images/side bubbles safe share lhs corner.png' %}">
            <div class="content_contact">
            <img src="{% static 'images/side bubbles safe share end right.png' %}">
            <form method="POST" action="/feedback/" id="feedback_form">
                {% csrf_token %}
                <label name="Feedback"> Feedback</label>
                <br>
                <input name="feedback" type="content" required='required'> 
                <br>
                <button type="submit" class="submit"> Submit</button>
            </form>
              <div>
                    <form method="POST" action="/qna/" id="qna_form">
                    {% csrf_token %}
                    <label name="Queries"> Post your queries</label>
                    <br>
                    <input name="question" type="content" required='required'> 
                    <br>
                    <button type="submit" class="submit"> Submit</button>
                    </form>
                </div>
            </div>
            
        </div>
        
        <footer>
            <em>
                created by LILACS 
                <br>
                copyright@2021

            </em>
        </footer>
    </div>
    <script>
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        function feedback_form(event){
            event.preventDefault()
            const myForm = event.target
            const myFormData = new FormData(myForm)
            const url = myForm.getAttribute("action")
            const method = myForm.getAttribute("method")
            const xhr = new XMLHttpRequest()
            const responseType = "json"

            xhr.responseType = responseType
            xhr.open(method, url)
            xhr.setRequestHeader("HTTP_X_REQUESTED_WITH","XMLHttpRequest")
            // xhr.setRequestHeader("X-Requested-With","XMLHttpRequest")
            console.log(myFormData.entries())
            xhr.onload = function(){
                const serverResponse = xhr.response
                console.log(serverResponse)
            }   
            xhr.send(myFormData)
            myForm.reset()
        }
        // xhr.onload = function(){
        //     if (xhr.status === 201 ){
        //         handleTweetFormError("", false)
        //         const newTweetJson = xhr.response
        //         const newTweetElement = formatTweetElement(newTweetJson)
        //         const orgHtml = tweetsContainerElement.innerHTML
        //         tweetsContainerElement.innerHTML = newTweetElement + orgHtml
        //         myForm.reset()
        //     }
        
    //     function feedback_form(message){
    //     console.log(message)
    //     const url="feedback/"
    //     const method="POST"
    //     const data = JSON.stringify({
    //         message: message
    //     })
    //     const xhr = new XMLHttpRequest()
    //     const csrftoken = getCookie('csrftoken');
    //     xhr.open(method, url)
    //     xhr.setRequestHeader("Content-Type", "application/json")
    //     xhr.setRequestHeader("HTTP_X_REQUESTED_WITH","XMLHttpRequest")
    //     xhr.setRequestHeader("X-Requested-With","XMLHttpRequest")
    //     xhr.setRequestHeader("X-CSRFToken", csrftoken)
    //     xhr.send(data)
    //     return
    //     // currentCount++
    //     // return
    // }
    const feedback_form_table = document.getElementById("feedback_form")
    feedback_form_table.addEventListener("submit", feedback_form)

    const qna_list_element = document.getElementById("qna-list")
    function loadqna(qna_element){
        const xhr = new XMLHttpRequest()
        const method = 'GET' //"POST"
        const url = '/qna_list/'
        const responseType = "json"

        xhr.responseType = responseType
        xhr.open(method, url)
        xhr.onload = function(){
            console.log(xhr.response)
            const serverResponse = xhr.response
            const listedItems = serverResponse
            var finalqna = ""
            var i;
            for(i=0; i < listedItems.length; i++){
                var qnaObj = listedItems[i]
                var currentItem = qna_formatter(qnaObj)
                finalqna += currentItem
            }
            qna_element.innerHTML = finalqna
            // console.log(listedItems)
        }
        xhr.send()

    }
    loadqna(qna_list_element)
    function qna_formatter(qna){
        var formatted_qna = '<p>' + qna.question_no + '.\t' + qna.question + '<br>' + 'Ans: ' + qna.answer + '</p>'
        return formatted_qna
    }

    function qna_form(event){
            event.preventDefault()
            const myForm = event.target
            const myFormData = new FormData(myForm)
            const url = myForm.getAttribute("action")
            const method = myForm.getAttribute("method")
            const xhr = new XMLHttpRequest()
            const responseType = "json"

            xhr.responseType = responseType
            xhr.open(method, url)
            xhr.setRequestHeader("HTTP_X_REQUESTED_WITH","XMLHttpRequest")
            // xhr.setRequestHeader("X-Requested-With","XMLHttpRequest")
            console.log(myFormData.entries())
            xhr.onload = function(){
                const serverResponse = xhr.response
                console.log(serverResponse)
                loadqna(qna_list_element)
            }   
            xhr.send(myFormData)
            myForm.reset()
        }

    const qna_form_table = document.getElementById("qna_form")
    qna_form_table.addEventListener("submit", qna_form)
</script>
</body>
</html>

